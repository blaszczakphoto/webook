require "crawler_optimizer"
require "crawler"
require "duplicate_optimizer"
require "duplicate_remover"
require "duplicate_optimizer"
require "crawler_optimizer"

class PageExploiter

	def initialize(base_url)
   @base_url = base_url
 end

 def exploit!(max = false)
  crawler = Crawler.new(@base_url)
  crawler.run(15)
  @duplicate_remover = DuplicateRemover.new(crawler.website)
  subpages = @duplicate_remover.remove

  if !max || max > 15
    crawler.run(50)
    subpages = @duplicate_remover.remove
  end
  if !max ||  max > 50 
    crawler.run(max) 
    subpages = @duplicate_remover.remove
  end

  return subpages.reverse
end



end